import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as c}from"./index.DwQS_Y10.js";import{u as O,b as G}from"./utils.DWyRvU8s.js";import{c as N}from"./createLucideIcon.BfVnSBWr.js";import{d as K,b as W,P as S,u as X,a as R,c as V}from"./index.B5RBIdlu.js";import{u as J,C as z}from"./chevron-down.Y48EbqfA.js";import"./index.CrJHwP2r.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],I=N("arrow-down",Q);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],P=N("arrow-up",Y);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ee=N("check",Z);function te(t){const[a,s]=c.useState(void 0);return K(()=>{if(t){s({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const o=n[0];let u,x;if("borderBoxSize"in o){const l=o.borderBoxSize,f=Array.isArray(l)?l[0]:l;u=f.inlineSize,x=f.blockSize}else u=t.offsetWidth,x=t.offsetHeight;s({width:u,height:x})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else s(void 0)},[t]),a}var y="Checkbox",[re]=V(y),[se,E]=re(y);function oe(t){const{__scopeCheckbox:a,checked:s,children:i,defaultChecked:n,disabled:o,form:u,name:x,onCheckedChange:l,required:f,value:g="on",internal_do_not_use_render:h}=t,[k,v]=X({prop:s,defaultProp:n??!1,onChange:l,caller:y}),[r,d]=c.useState(null),[m,b]=c.useState(null),p=c.useRef(!1),w=r?!!u||!!r.closest("form"):!0,j={checked:k,disabled:o,setChecked:v,control:r,setControl:d,name:x,form:u,value:g,hasConsumerStoppedPropagationRef:p,required:f,defaultChecked:C(n)?!1:n,isFormControl:w,bubbleInput:m,setBubbleInput:b};return e.jsx(se,{scope:a,...j,children:ne(h)?h(j):i})}var D="CheckboxTrigger",T=c.forwardRef(({__scopeCheckbox:t,onKeyDown:a,onClick:s,...i},n)=>{const{control:o,value:u,disabled:x,checked:l,required:f,setControl:g,setChecked:h,hasConsumerStoppedPropagationRef:k,isFormControl:v,bubbleInput:r}=E(D,t),d=O(n,g),m=c.useRef(l);return c.useEffect(()=>{const b=o?.form;if(b){const p=()=>h(m.current);return b.addEventListener("reset",p),()=>b.removeEventListener("reset",p)}},[o,h]),e.jsx(S.button,{type:"button",role:"checkbox","aria-checked":C(l)?"mixed":l,"aria-required":f,"data-state":q(l),"data-disabled":x?"":void 0,disabled:x,value:u,...i,ref:d,onKeyDown:R(a,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:R(s,b=>{h(p=>C(p)?!0:!p),r&&v&&(k.current=b.isPropagationStopped(),k.current||b.stopPropagation())})})});T.displayName=D;var A=c.forwardRef((t,a)=>{const{__scopeCheckbox:s,name:i,checked:n,defaultChecked:o,required:u,disabled:x,value:l,onCheckedChange:f,form:g,...h}=t;return e.jsx(oe,{__scopeCheckbox:s,checked:n,defaultChecked:o,disabled:x,required:u,onCheckedChange:f,name:i,form:g,value:l,internal_do_not_use_render:({isFormControl:k})=>e.jsxs(e.Fragment,{children:[e.jsx(T,{...h,ref:a,__scopeCheckbox:s}),k&&e.jsx(L,{__scopeCheckbox:s})]})})});A.displayName=y;var $="CheckboxIndicator",B=c.forwardRef((t,a)=>{const{__scopeCheckbox:s,forceMount:i,...n}=t,o=E($,s);return e.jsx(W,{present:i||C(o.checked)||o.checked===!0,children:e.jsx(S.span,{"data-state":q(o.checked),"data-disabled":o.disabled?"":void 0,...n,ref:a,style:{pointerEvents:"none",...t.style}})})});B.displayName=$;var M="CheckboxBubbleInput",L=c.forwardRef(({__scopeCheckbox:t,...a},s)=>{const{control:i,hasConsumerStoppedPropagationRef:n,checked:o,defaultChecked:u,required:x,disabled:l,name:f,value:g,form:h,bubbleInput:k,setBubbleInput:v}=E(M,t),r=O(s,v),d=J(o),m=te(i);c.useEffect(()=>{const p=k;if(!p)return;const w=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(w,"checked").set,H=!n.current;if(d!==o&&_){const U=new Event("click",{bubbles:H});p.indeterminate=C(o),_.call(p,C(o)?!1:o),p.dispatchEvent(U)}},[k,d,o,n]);const b=c.useRef(C(o)?!1:o);return e.jsx(S.input,{type:"checkbox","aria-hidden":!0,defaultChecked:u??b.current,required:x,disabled:l,name:f,value:g,form:h,...a,tabIndex:-1,ref:r,style:{...a.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});L.displayName=M;function ne(t){return typeof t=="function"}function C(t){return t==="indeterminate"}function q(t){return C(t)?"indeterminate":t?"checked":"unchecked"}function ae({className:t,...a}){return e.jsx(A,{"data-slot":"checkbox",className:G("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:e.jsx(B,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:e.jsx(ee,{className:"size-3.5"})})})}const F=t=>{const a=[{bg:"bg-rose-200/40 dark:bg-rose-900/30",text:"text-rose-700 dark:text-rose-300"},{bg:"bg-blue-200/40 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-300"},{bg:"bg-green-200/40 dark:bg-green-900/30",text:"text-green-700 dark:text-green-300"},{bg:"bg-purple-200/40 dark:bg-purple-900/30",text:"text-purple-700 dark:text-purple-300"},{bg:"bg-amber-200/40 dark:bg-amber-900/30",text:"text-amber-700 dark:text-amber-300"},{bg:"bg-cyan-200/40 dark:bg-cyan-900/30",text:"text-cyan-700 dark:text-cyan-300"},{bg:"bg-pink-200/40 dark:bg-pink-900/30",text:"text-pink-700 dark:text-pink-300"},{bg:"bg-indigo-200/40 dark:bg-indigo-900/30",text:"text-indigo-700 dark:text-indigo-300"},{bg:"bg-teal-200/40 dark:bg-teal-900/30",text:"text-teal-700 dark:text-teal-300"},{bg:"bg-orange-200/40 dark:bg-orange-900/30",text:"text-orange-700 dark:text-orange-300"}];let s=0;for(let i=0;i<t.length;i++)s=t.charCodeAt(i)+((s<<5)-s);return a[Math.abs(s)%a.length]};function de({tag:t,className:a=""}){const s=F(t);return e.jsx("span",{className:`px-2 py-1 text-xs rounded ${s.bg} ${s.text} ${a}`,children:t})}function pe({posts:t,allTags:a}){const[s,i]=c.useState(new Set),[n,o]=c.useState("newest"),[u,x]=c.useState(!1),[l,f]=c.useState(!1),g=c.useRef(null),h=c.useRef(null);c.useEffect(()=>{const r=d=>{g.current&&!g.current.contains(d.target)&&x(!1),h.current&&!h.current.contains(d.target)&&f(!1)};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[]);const k=r=>{i(d=>{const m=new Set(d);return m.has(r)?m.delete(r):m.add(r),m})},v=c.useMemo(()=>{let r=t;return s.size>0&&(r=r.filter(d=>d.tags.some(m=>s.has(m)))),r=[...r].sort((d,m)=>{const b=new Date(d.pubDate).valueOf(),p=new Date(m.pubDate).valueOf();return n==="newest"?p-b:b-p}),r},[t,s,n]);return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[e.jsxs("div",{className:"relative",ref:h,children:[e.jsxs("button",{onClick:()=>f(!l),className:"flex items-center gap-2 px-3 py-1.5 text-sm rounded-md bg-secondary border border-border hover:border-foreground/20 transition",children:[n==="newest"?e.jsx(I,{className:"w-4 h-4"}):e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:n==="newest"?"Newest":"Oldest"}),e.jsx(z,{className:`w-3 h-3 transition-transform ${l?"rotate-180":""}`})]}),l&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 w-32 bg-popover border border-border rounded-md shadow-lg z-50 py-1",children:[e.jsxs("button",{onClick:()=>{o("newest"),f(!1)},className:`w-full px-3 py-1.5 text-sm text-left flex items-center gap-2 hover:bg-muted transition ${n==="newest"?"text-foreground":"text-muted-foreground"}`,children:[e.jsx(I,{className:"w-4 h-4"}),"Newest"]}),e.jsxs("button",{onClick:()=>{o("oldest"),f(!1)},className:`w-full px-3 py-1.5 text-sm text-left flex items-center gap-2 hover:bg-muted transition ${n==="oldest"?"text-foreground":"text-muted-foreground"}`,children:[e.jsx(P,{className:"w-4 h-4"}),"Oldest"]})]})]}),e.jsxs("div",{className:"relative",ref:g,children:[e.jsxs("button",{onClick:()=>x(!u),className:"flex items-center gap-2 px-3 py-1.5 text-sm rounded-md bg-secondary border border-border hover:border-foreground/20 transition",children:["Tags",s.size>0&&e.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-accent text-accent-foreground rounded-full",children:s.size}),e.jsx(z,{className:`w-3 h-3 transition-transform ${u?"rotate-180":""}`})]}),u&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 w-44 bg-popover border border-border rounded-md shadow-lg z-50 p-2",children:[e.jsx("div",{className:"space-y-1",children:a.map(r=>{const d=F(r);return e.jsxs("label",{className:"flex items-center gap-2 px-2 py-1.5 rounded hover:bg-muted cursor-pointer transition",children:[e.jsx(ae,{checked:s.has(r),onCheckedChange:()=>k(r)}),e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${d.bg} ${d.text}`,children:r})]},r)})}),s.size>0&&e.jsx("button",{onClick:()=>i(new Set),className:"w-full mt-2 pt-2 border-t border-border text-xs text-muted-foreground hover:text-foreground transition text-center",children:"Clear filters"})]})]})]}),e.jsx("div",{className:"space-y-6",children:v.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No blog posts match your filters."}):v.map(r=>e.jsxs("a",{href:`/blog/${r.slug}`,className:"block p-6 bg-secondary rounded-lg border border-border hover:border-foreground/20 hover:bg-secondary/80 transition group",children:[e.jsx("time",{className:"text-sm text-muted-foreground",children:new Date(r.pubDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),e.jsx("h2",{className:"text-xl font-semibold mt-2 mb-2 group-hover:text-accent transition",children:r.title}),e.jsx("p",{className:"text-muted-foreground text-sm",children:r.description}),r.tags&&r.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:r.tags.map(d=>e.jsx(de,{tag:d},d))})]},r.slug))})]})}export{pe as BlogFilter};
