import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as i}from"./index.DwQS_Y10.js";import{d as I,b as k,S as T}from"./utils.DWyRvU8s.js";import{c as S}from"./createLucideIcon.BfVnSBWr.js";const C=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,z=I,E=(r,s)=>t=>{var o;if(s?.variants==null)return z(r,t?.class,t?.className);const{variants:m,defaultVariants:l}=s,p=Object.keys(m).map(n=>{const c=t?.[n],u=l?.[n];if(c===null)return null;const d=C(c)||C(u);return m[n][d]}),f=t&&Object.entries(t).reduce((n,c)=>{let[u,d]=c;return d===void 0||(n[u]=d),n},{}),g=s==null||(o=s.compoundVariants)===null||o===void 0?void 0:o.reduce((n,c)=>{let{class:u,className:d,...y}=c;return Object.entries(y).every(x=>{let[h,b]=x;return Array.isArray(b)?b.includes({...l,...f}[h]):{...l,...f}[h]===b})?[...n,u,d]:n},[]);return z(r,p,g,t?.class,t?.className)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],O=S("circle-check",M);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],P=S("loader-circle",L);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],q=S("send",R);function _({className:r,type:s,...t}){return e.jsx("input",{type:s,"data-slot":"input",className:k("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-xs transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),...t})}const D=E("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70");function N({className:r,...s}){return e.jsx("label",{"data-slot":"label",className:k(D(),r),...s})}function $({className:r,...s}){return e.jsx("textarea",{"data-slot":"textarea",className:k("flex min-h-[120px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-xs placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm resize-none",r),...s})}const Y=E("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",xs:"h-6 gap-1 rounded-md px-2 text-xs has-[>svg]:px-1.5 [&_svg:not([class*='size-'])]:size-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-xs":"size-6 rounded-md [&_svg:not([class*='size-'])]:size-3","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function H({className:r,variant:s="default",size:t="default",asChild:o=!1,...m}){const l=o?T:"button";return e.jsx(l,{"data-slot":"button","data-variant":s,"data-size":t,className:k(Y({variant:s,size:t,className:r})),...m})}function U({turnstileSiteKey:r="0x4AAAAAACYIXwKzjELumsak"}){const[s,t]=i.useState(""),[o,m]=i.useState(""),[l,p]=i.useState(""),[f,g]=i.useState(null),[n,c]=i.useState(!1),[u,d]=i.useState(!1),[y,x]=i.useState(null),[h,b]=i.useState(!1),j=i.useRef(null),w=i.useRef(null);i.useEffect(()=>{const a=()=>{b(document.documentElement.classList.contains("dark"))};a();const v=new MutationObserver(a);return v.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>v.disconnect()},[]),i.useEffect(()=>{if(document.querySelector('script[src*="turnstile"]'))return;const a=document.createElement("script");a.src="https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit",a.async=!0,a.defer=!0,document.head.appendChild(a)},[]),i.useEffect(()=>{const a=()=>{if(!(!window.turnstile||!j.current)){if(w.current)try{window.turnstile.remove(w.current)}catch{}j.current.innerHTML="",w.current=window.turnstile.render(j.current,{sitekey:r,callback:A=>{g(A)},"expired-callback":()=>{g(null)},theme:h?"dark":"light"})}},v=setInterval(()=>{window.turnstile&&(clearInterval(v),a())},100);return()=>{clearInterval(v)}},[r,h]);const F=async a=>{if(a.preventDefault(),!f){x("Please complete the CAPTCHA verification");return}c(!0),x(null);try{if(!(await fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,email:o,message:l,captchaToken:f})})).ok)throw new Error("Failed to send message");d(!0),t(""),m(""),p(""),g(null),setTimeout(()=>{d(!1)},3e3)}catch{x("Failed to send message. Please try again.")}finally{c(!1)}},V=s.trim()&&o.trim()&&l.trim()&&f;return e.jsxs("div",{className:"bg-secondary rounded-lg border border-border p-6 mt-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Send a Message"}),e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"name",children:"Name"}),e.jsx(_,{id:"name",type:"text",placeholder:"Your name",value:s,onChange:a=>t(a.target.value),required:!0,disabled:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"email",children:"Email"}),e.jsx(_,{id:"email",type:"email",placeholder:"your@email.com",value:o,onChange:a=>m(a.target.value),required:!0,disabled:n})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"message",children:"Message"}),e.jsx($,{id:"message",placeholder:"Your message...",value:l,onChange:a=>p(a.target.value),required:!0,disabled:n})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsx("div",{ref:j,className:"cf-turnstile"}),e.jsx(H,{type:"submit",disabled:!V||n,className:`min-w-[140px] transition-all duration-300 ${u?"bg-green-600 hover:bg-green-600":""}`,children:n?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):u?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-4 h-4 animate-[scale-in_0.3s_ease-out]"}),"Sent!"]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"w-4 h-4"}),"Send Message"]})})]}),y&&e.jsx("p",{className:"text-destructive text-sm",children:y})]}),e.jsx("style",{children:`
        @keyframes scale-in {
          0% {
            transform: scale(0);
            opacity: 0;
          }
          50% {
            transform: scale(1.2);
          }
          100% {
            transform: scale(1);
            opacity: 1;
          }
        }
      `})]})}export{U as ContactForm};
